#!/usr/bin/env swipl 
:- set_prolog_flag(verbose,silent).
:- use_module(cli_error).
:- consult('../balance/balancer').
:- initialization cli_message.
:- op(990,xfy,::).


InputType - Input :: -Result :-
	InputType - Input :: symbolic - Result,
	!.


InputType - AtomInput :: ResultType - Result :-
	atom_chars(AtomInput,Input),
	(
		InputType = name -> name_2_formula(Input,StringRes);
		InputType = formula -> formula_2_name(Input,StringRes);
		balance_equation(InputType,Input,ResultType,StringRes)
	),
		
	atom_chars(Result,StringRes).





cli_message :-
	writeln('\e[00;32mWelcome to the Chemlogic CLI interface!\e[00m'),
	writeln('(Work in progress)'), nl,

	writeln('Enter a rule in the form:		\e[1minput type - \'input\' :: output type -X.\e[0m'),
	writeln('For default output, use: 		\e[1minput type - \'input\' :: -X.\e[0m'),
	writeln('To quit the program:			halt.'), nl,

	writeln('Input and Output Types:'),
	writeln('formula	Chemical formula'),
	writeln('name		Chemical name'),
	writeln('symbolic	Symbolic equation'),
	writeln('word		Word equation'),nl,

	writeln('Example:	\e[1mformula - \'CuCl2\' :: -Name.\e[0m'),
	writeln('		word - \'H2 + O2 --> H2O\' :: symbolic - Result.'),
	writeln('Complex:	name - \'baking soda\' :: -F, formula - F :: -CanonicalName.'),nl,

	writeln('ALL LINES MUST END WITH A .'), nl,nl.

